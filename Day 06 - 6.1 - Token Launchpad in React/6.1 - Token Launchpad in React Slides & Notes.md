# 6.1 - Token Launchpad in React

> **Course**: 100xDevs Cohort 3.0 — Web3 Track
> **Instructor**: Harkirat Singh
> **Week**: 6.1
> **Slides**: https://petal-estimate-4e9.notion.site/Token-launchpad-in-react-f0027bd023d4467ab5eb87d16ab21b40
> **Notes**: https://feather-lion-ff2.notion.site/Week-6-1-7f754b69ead648c5a4213633f9b16f04
> **Assignment Solution**: https://github.com/27manavgandhi/solana-token-Launchpad
> **Starter Repo**: https://github.com/100xdevs-cohort-3/week-6-web3-token-launchpad

---

## Topics Covered Today

1. Transaction vs Instructions — deep dive
2. Wallet Adapter vs Local Wallet — key differences
3. Initializing the Token Launchpad project
4. Adding Solana Wallet Adapter to the project
5. Adding functionality to create tokens (Token Mint + Metadata)
6. Inspecting the `createMint` call under the hood
7. Why users must sign — not us

---

## 1. Transaction vs Instructions

### Transactions

A **transaction** is like a "package" that holds a set of actions you want to take on the blockchain. It includes information about which accounts are involved, how much to transfer, and any specific rules.

> Think of it like going to a bank and submitting a form to transfer money. The form (transaction) contains all the necessary details: your account number, the recipient's account, the amount to be transferred, and the authorization (your signature).

### Instructions

An **instruction** is like the individual steps or actions within a transaction. It tells the Solana blockchain exactly what you want to do (e.g., send tokens, interact with a smart contract, etc.).

> In our bank example, an instruction would be something like "transfer $100 to account X." You can have multiple instructions within a single transaction, like "transfer $100 to account X" AND "pay $10 to account Y."

### Putting It All Together

In the Solana blockchain, a **transaction** can contain one or more **instructions**. Each instruction represents a specific action to be executed. A transaction can do many things at once by bundling several instructions together.

### Real-Life Example

Imagine you go to a bank to do two things:
1. Transfer $100 to your friend's account
2. Pay a $50 bill

In Solana terms:
- The **transaction** is the form you fill out, which includes both actions
- The **instructions** are:
  - "Send $100 to Friend"
  - "Pay $50 bill"

When you submit this form (the transaction) to the bank (Solana blockchain), the bank processes both instructions in one go. Similarly, on Solana, the blockchain processes multiple instructions in a single transaction.

> So, a **transaction** is the whole package you submit, and **instructions** are the individual actions within that package.

---

## 2. Wallet Adapter vs Local Wallet

### Local Wallet

A **local wallet** is like keeping your money in a physical wallet at home. You have full control of it because it's right there with you. You can decide when to open it, take money out, or put money in.

In the world of blockchain, a local wallet would be an app or software installed directly on your computer or phone (like Phantom, Sollet, etc.). **You're the one in charge of managing the private keys** (kind of like the secret password to your money).

**Example**: Think of a local wallet as your **physical wallet at home**. You are the only one who knows where it is, and you decide when to take money out to pay someone.

### Wallet Adapter

A **wallet adapter** is like an ATM card. Instead of carrying your physical wallet everywhere, you use an ATM card to access your money whenever you need it. The ATM card connects you to your bank, and with a simple swipe and a PIN, you can make payments or withdraw money.

A **wallet adapter** works similarly in blockchain applications — it connects the app or website you're using to your wallet without you having to manage all the technical details. It just makes the process smoother and quicker by using your wallet safely.

**Example**: The wallet adapter is like an ATM card. You don't have to carry all your money around or worry about losing it. When you need to pay, you simply connect your card (adapter) to your bank (wallet) and use it.

### Putting It Together

| | Local Wallet | Wallet Adapter |
|---|---|---|
| Analogy | Physical wallet at home | ATM card |
| Control | You manage private keys directly | Adapter handles connection |
| Use case | Scripts, CLI, backend | dApps, browser-based apps |
| Signing | `Keypair.fromSecretKey(...)` | `wallet.sendTransaction(...)` |

> With a **local wallet**, you handle everything yourself. With a **wallet adapter**, it helps connect your wallet to apps more conveniently.

### Why we CAN'T use `createMint` directly in a dApp

```js
// This is what we did in Day 4 (local wallet / Node.js script)
const { createMint } = require('@solana/spl-token');
const mint = await createMint(
  connection,
  payer,         // ← this is a LOCAL Keypair — we have the private key
  mintAuthority,
  null,
  6,
  TOKEN_PROGRAM_ID
);
```

Since we want an **end user** to create their own token and **pay for the gas**, we need to ask **THEIR WALLET** for approval. We **CANNOT** create our own `KeyPair` and create a token using it — the user must sign it.

---

## 3. Initializing the Project

### Starting the project locally

```bash
# Clone the starter repo
git clone https://github.com/100xdevs-cohort-3/week-6-web3-token-launchpad
cd week-6-web3-token-launchpad

# Go to the starter folder
cd 1-token-launchpad-starter

# Install dependencies
npm install

# Start the dev server
npm run dev
```

The starter has a basic **Solana Token Launchpad** UI with input fields for Name, Symbol, Image URL, and Initial Supply.

---

## 4. Add the Solana Wallet Adapter

**Ref**: https://github.com/anza-xyz/wallet-adapter/blob/master/APP.md

```bash
npm install @solana/wallet-adapter-base \
    @solana/wallet-adapter-react \
    @solana/wallet-adapter-react-ui \
    @solana/wallet-adapter-wallets \
    @solana/web3.js
```

Add the new set of imports to `App.jsx`:

```jsx
// wallet adapter imports
import { ConnectionProvider, WalletProvider } from '@solana/wallet-adapter-react';
import {
  WalletModalProvider,
  WalletDisconnectButton,
  WalletMultiButton
} from '@solana/wallet-adapter-react-ui';
import '@solana/wallet-adapter-react-ui/styles.css';
```

Wrap the `TokenLaunchpad` component inside the wallet adapter providers:

```jsx
function App() {
  return (
    <div>
      <ConnectionProvider endpoint={"https://api.devnet.solana.com"}>
        <WalletProvider wallets={[]} autoConnect>
          <WalletModalProvider>
            <div style={{
              display: 'flex',
              justifyContent: 'space-between',
              padding: 20
            }}>
              <WalletMultiButton />
              <WalletDisconnectButton />
            </div>
            <TokenLaunchpad></TokenLaunchpad>
          </WalletModalProvider>
        </WalletProvider>
      </ConnectionProvider>
    </div>
  )
}
```

**Final App.jsx reference**: https://github.com/100xdevs-cohort-3/week-6-web3-token-launchpad/blob/main/2-token-launchpad-with-adapter/src/App.jsx

---

## 5. Adding Functionality to Create Tokens

### Install spl-token and node polyfills

```bash
npm install @solana/spl-token @solana/web3.js

# Add polyfills to ensure node APIs are available in the browser
npm install --save-dev vite-plugin-node-polyfills
```

### Update `vite.config.ts`

```ts
import { defineConfig } from 'vite'
import { nodePolyfills } from 'vite-plugin-node-polyfills'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    nodePolyfills(),
  ],
})
```

### Add `onclick` handler in `TokenLaunchpad.jsx`

```jsx
export function TokenLaunchpad() {

  function createToken() {
    const name = document.getElementById('name').value;
    const symbol = document.getElementById('symbol').value;
    const image = document.getElementById('image').value;
    const initialSupply = document.getElementById('initialSupply').value;
  }

  return (
    <div style={{
      height: '100vh',
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'center',
      flexDirection: 'column'
    }}>
      <h1>Solana Token Launchpad</h1>
      <input className='inputText' type='text' placeholder='Name'></input> <br />
      <input className='inputText' type='text' placeholder='Symbol'></input> <br />
      <input className='inputText' type='text' placeholder='Image URL'></input> <br />
      <input className='inputText' type='text' placeholder='Initial Supply'></input>
      <button onClick={createToken} className='btn'>Create a token</button>
    </div>
  )
}
```

---

## 6. Inspecting the `createMint` Call

The `createMint` function sends a **transaction** with **2 instructions**:

1. **Create a fresh `mint account`** — allocate space and lamports on-chain
2. **Initialise data inside the `mint account`** — store `mint data` (decimals, mintAuthority, freezeAuthority etc.)

```ts
// What createMint does internally:
export async function createMint(
  connection: Connection,
  payer: Signer,
  mintAuthority: PublicKey,
  freezeAuthority: PublicKey | null,
  decimals: number,
  keypair = Keypair.generate(),
  confirmOptions?: ConfirmOptions,
  programId = TOKEN_PROGRAM_ID
): Promise<PublicKey> {
  const lamports = await getMinimumBalanceForRentExemptMint(connection);

  const transaction = new Transaction().add(
    // Instruction 1: Create the account with enough lamports
    SystemProgram.createAccount({
      fromPubkey: payer.publicKey,
      newAccountPubkey: keypair.publicKey,
      space: MINT_SIZE,
      lamports,
      programId,
    }),
    // Instruction 2: Initialize the mint with decimals + authorities
    createInitializeMintInstruction(
      keypair.publicKey, decimals, mintAuthority, freezeAuthority, programId
    )
  );

  await sendAndConfirmTransaction(connection, transaction, [payer, keypair], confirmOptions);
  return keypair.publicKey;
}
```

### Key insight — why the user must sign

We need to bring in the same code in our codebase and **make the user sign it**:

- `payer` = `wallet.publicKey` (connected user pays fees)
- We generate a fresh `Keypair` for the mint account
- We build the transaction manually
- We call `wallet.sendTransaction(transaction, connection)` — this pops up the Phantom/Backpack approval modal
- The user signs and approves → token is created under their authority

```jsx
// In TokenLaunchpad.jsx — full createToken function
import { useConnection, useWallet } from '@solana/wallet-adapter-react';
import { Keypair, SystemProgram, Transaction } from '@solana/web3.js';
import {
  createInitializeMintInstruction,
  getMinimumBalanceForRentExemptMint,
  MINT_SIZE,
  TOKEN_PROGRAM_ID,
  getAssociatedTokenAddressSync,
  createAssociatedTokenAccountInstruction,
  createMintToInstruction
} from '@solana/spl-token';

export function TokenLaunchpad() {
  const { connection } = useConnection();
  const wallet = useWallet();

  async function createToken() {
    const name = document.getElementById('name').value;
    const symbol = document.getElementById('symbol').value;
    const image = document.getElementById('image').value;
    const initialSupply = document.getElementById('initialSupply').value;

    // 1. Generate a new keypair for the mint account
    const mintKeypair = Keypair.generate();

    // 2. Get minimum lamports for rent exemption
    const lamports = await getMinimumBalanceForRentExemptMint(connection);

    // 3. Get the ATA address for the connected wallet
    const associatedToken = getAssociatedTokenAddressSync(
      mintKeypair.publicKey,
      wallet.publicKey,
      false,
      TOKEN_PROGRAM_ID
    );

    // 4. Build transaction with all instructions
    const transaction = new Transaction().add(
      // Instruction 1: Create the mint account
      SystemProgram.createAccount({
        fromPubkey: wallet.publicKey,
        newAccountPubkey: mintKeypair.publicKey,
        space: MINT_SIZE,
        lamports,
        programId: TOKEN_PROGRAM_ID,
      }),
      // Instruction 2: Initialize the mint
      createInitializeMintInstruction(
        mintKeypair.publicKey,
        9,                    // decimals
        wallet.publicKey,     // mint authority = connected user
        wallet.publicKey,     // freeze authority = connected user
        TOKEN_PROGRAM_ID
      ),
      // Instruction 3: Create ATA for the user
      createAssociatedTokenAccountInstruction(
        wallet.publicKey,       // payer
        associatedToken,        // ATA address
        wallet.publicKey,       // ATA owner
        mintKeypair.publicKey   // mint
      ),
      // Instruction 4: Mint initial supply to the ATA
      createMintToInstruction(
        mintKeypair.publicKey,
        associatedToken,
        wallet.publicKey,       // mint authority
        initialSupply * (10 ** 9)
      )
    );

    // 5. Ask the user to sign and send
    await wallet.sendTransaction(transaction, connection, {
      signers: [mintKeypair]  // mintKeypair must also sign (it's a new account)
    });

    alert(`Token created! Mint: ${mintKeypair.publicKey.toBase58()}`);
  }

  return (
    <div style={{
      height: '100vh',
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'center',
      flexDirection: 'column'
    }}>
      <h1>Solana Token Launchpad</h1>
      <input id='name' className='inputText' type='text' placeholder='Name' /><br />
      <input id='symbol' className='inputText' type='text' placeholder='Symbol' /><br />
      <input id='image' className='inputText' type='text' placeholder='Image URL' /><br />
      <input id='initialSupply' className='inputText' type='text' placeholder='Initial Supply' />
      <button onClick={createToken} className='btn'>Create a token</button>
    </div>
  );
}
```

---

## Summary

In summary, we've learned:
- How things are happening internally — **Transaction vs Instruction**
- How **wallet adapter** differs from a **local wallet**
- Why we can't use `createMint` directly (user must sign)
- Built a working **Token Launchpad** where any user can create their own SPL token by connecting their Phantom wallet

---

## Key Concepts

| Concept | Description |
|---|---|
| Transaction | A package/bundle of one or more instructions submitted to Solana |
| Instruction | A single operation within a transaction (create account, initialize mint, etc.) |
| Local Wallet | Keypair loaded from file — you control the private key directly |
| Wallet Adapter | Browser-based connector — the user's wallet signs, not you |
| `createMint` | Helper that sends 2 instructions: `createAccount` + `initializeMint` |
| `MINT_SIZE` | Fixed byte size of a mint account (82 bytes) |
| `getMinimumBalanceForRentExemptMint` | Gets the lamports needed to make a mint rent-exempt |
| `signers: [mintKeypair]` | New accounts must sign their own creation transaction |
| `wallet.sendTransaction` | Asks the connected wallet to sign + broadcast the tx |

---

## References

- Slides: https://petal-estimate-4e9.notion.site/Token-launchpad-in-react-f0027bd023d4467ab5eb87d16ab21b40
- Week 6.1 Notes: https://feather-lion-ff2.notion.site/Week-6-1-7f754b69ead648c5a4213633f9b16f04
- Assignment Solution: https://github.com/27manavgandhi/solana-token-Launchpad
- Starter Repo: https://github.com/100xdevs-cohort-3/week-6-web3-token-launchpad
- Full codebase: https://gitingest.com/100xdevs-cohort-3/week-6-web3-token-launchpad/
- Wallet Adapter docs: https://github.com/anza-xyz/wallet-adapter/blob/master/APP.md
